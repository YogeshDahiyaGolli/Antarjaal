<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Antarjaal ‚Äì Earn & Learn Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background: #f2f8f6; color: #212b36; font-family: Arial, sans-serif; margin:0; }
    .header-bar { background: linear-gradient(90deg, #4CAF50 60%, #319d7f 100%); color:#fff; padding: 19px 0 13px 0; font-weight: 700; font-size: 24px; text-align:center; letter-spacing:1px; box-shadow: 0 2px 4px #0002;}
    .card { background: #fff; margin: 33px auto 0 auto; padding: 27px 16px 20px 16px; max-width: 410px; border-radius: 15px; box-shadow: 0 2px 7px #0002;}
    input, button.main-btn { padding: 11px; margin: 10px 0; width: 92%; border-radius: 5px; border: 1px solid #b2bdb3; font-size: 16px;}
    input[type="password"], input[type="text"]{ width:90%; }
    button.main-btn { background: linear-gradient(90deg, #4CAF50 60%, #319d7f 100%); color: #fff; border: none; font-weight:bold; cursor: pointer; margin-bottom: 0; box-shadow: 0 2px 5px #0001; transition:.2s;}
    button.main-btn:hover { background: #388E3C;}
    .small-text{font-size:13px;color:#666;}
    .link-btn { background:none; border:none; color:#1e88e5; text-decoration:underline; font-size:15px; cursor:pointer;}
    .usernamebar { background: #eafde6; color: #1c6b23; padding: 8px 0 5px 0; font-weight: 600; font-size: 16px; text-align:center; display:none; letter-spacing:.5px; }
    .logout-btn { float:right; margin:-18px 10px 0 0; background:none; border:none; color:#c03f00; font-size:15px; cursor:pointer;}
    .nav { display: flex; justify-content: space-around; background: #e3f8df; border-bottom:1px solid #b6e4c2;}
    .nav button { background: none; border: none; font-size: 17px; padding: 13px 0; flex:1; color:#1c6b23; font-weight:600; cursor:pointer;}
    .nav button.active { border-bottom: 3px solid #4CAF50; color:#388E3C; background: #eafde6;}
    .admin-panel {background:#fffbe6;border:2px solid #ffe066;box-shadow:0 2px 7px #ffeab0aa;border-radius:11px;padding:18px 12px 20px 12px;max-width:440px;margin:30px auto;}
    .admin-panel h3{color:#b97e07;}
    .admin-users-table {width:98%;margin-top:8px;border-collapse:collapse;font-size:15px;}
    .admin-users-table th,.admin-users-table td{border:1px solid #eee;padding:5px 8px;text-align:left;}
    .admin-users-table th{background:#e9f5e1;}
    .admin-adj-btn {padding:2px 6px;font-size:13px;border-radius:4px;border:1px solid #c2c2c2;background:#e9f5e1;color:#319d7f;cursor:pointer;}
    .broadcast-bar {background:#ffe066;color:#b97e07;font-weight:600;padding:9px 0;text-align:center;}
    @media (max-width:500px) {
      .card {padding:13px 2px; max-width:98vw;}
      .header-bar { font-size: 16px;}
      .usernamebar { font-size: 14px;}
      .admin-panel {max-width:99vw;padding:7px;}
      .admin-users-table td,.admin-users-table th{font-size:13px;padding:3px 2px;}
    }
  </style>
</head>
<body>
  <div class="header-bar">üåê Antarjaal ‚Äì Earn & Learn Platform</div>
  <div class="broadcast-bar" id="broadcastBar" style="display:none;"></div>
  <div class="usernamebar" id="usernamebar">
    <span id="usernameShow"></span>
    <button class="logout-btn" onclick="logout()" title="Logout">Logout</button>
  </div>
  <div class="nav" id="navBar" style="display:none;">
    <button onclick="showTab('home')" id="tab-home" class="active">Home</button>
    <button onclick="showTab('admin')" id="tab-admin" style="display:none;">Admin</button>
  </div>
  <!-- LOGIN PAGE -->
  <div class="card" id="loginPage">
    <h2 style="color:#319d7f;">Login ‡§ï‡§∞‡•á‡§Ç</h2>
    <input id="loginUsername" type="text" placeholder="Username ‡§≤‡§ø‡§ñ‡•á‡§Ç" maxlength="18" autocomplete="username" /><br>
    <input id="loginPassword" type="password" placeholder="Password ‡§°‡§æ‡§≤‡•á‡§Ç" maxlength="18" autocomplete="current-password" /><br>
    <button class="main-btn" onclick="login()">Login</button>
    <div class="small-text">‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞? <button class="link-btn" onclick="showSignUp()">Sign Up ‡§ï‡§∞‡•á‡§Ç</button></div>
    <div class="small-text" id="loginError" style="color:#c03f00;"></div>
  </div>
  <!-- SIGN UP PAGE -->
  <div class="card" id="signUpPage" style="display:none;">
    <h2 style="color:#388E3C;">Sign Up ‡§ï‡§∞‡•á‡§Ç</h2>
    <input id="signUpUsername" type="text" placeholder="Username ‡§ö‡•Å‡§®‡•á‡§Ç" maxlength="18" autocomplete="username" /><br>
    <input id="signUpPassword" type="password" placeholder="Password ‡§ö‡•Å‡§®‡•á‡§Ç" maxlength="18" autocomplete="new-password" /><br>
    <input id="signUpConfirm" type="password" placeholder="Confirm Password" maxlength="18" autocomplete="new-password" /><br>
    <button class="main-btn" onclick="signUp()">Sign Up</button>
    <div class="small-text"><button class="link-btn" onclick="showLogin()">Login ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç</button></div>
    <div class="small-text" id="signUpError" style="color:#c03f00;"></div>
  </div>
  <!-- HOME PAGE -->
  <div class="card" id="homePage" style="display:none;">
    <h2 style="color:#319d7f;">Welcome to Antarjaal üöÄ</h2>
    <div style="font-size:15.5px;">Earn daily rewards by completing tasks!</div>
  </div>
  <!-- ADMIN PANEL -->
  <div class="admin-panel" id="adminPanel" style="display:none;">
    <h3>üëë Admin Panel</h3>
    <div>
      <b>Broadcast Message:</b>
      <input id="adminBroadcastInput" class="admin-broadcast-input" maxlength="80" placeholder="Type message...">
      <button onclick="adminBroadcastMsg()" class="admin-adj-btn">Send</button>
      <button onclick="adminClearBroadcast()" class="admin-adj-btn" style="background:#fbeaea;color:#a80b0b;">Clear</button>
    </div>
    <hr>
    <div>
      <b>All Users:</b>
      <table class="admin-users-table" id="adminUsersTable">
        <thead>
          <tr><th>#</th><th>Username</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <footer>¬© 2025 Antarjaal | All Rights Reserved</footer>
  <script>
    function getUsers() {
      return JSON.parse(localStorage.getItem('antarjaalUsers') || '{}');
    }
    function setUsers(users) {
      localStorage.setItem('antarjaalUsers', JSON.stringify(users));
    }
    function getLoggedInUser() {
      return localStorage.getItem('antarjaalLoggedInUser') || "";
    }
    function setLoggedInUser(username) {
      localStorage.setItem('antarjaalLoggedInUser', username);
    }
    function showSignUp() {
      document.getElementById('loginPage').style.display = "none";
      document.getElementById('signUpPage').style.display = "";
      document.getElementById('signUpUsername').value = "";
      document.getElementById('signUpPassword').value = "";
      document.getElementById('signUpConfirm').value = "";
      document.getElementById('signUpError').innerText = "";
    }
    function showLogin() {
      document.getElementById('signUpPage').style.display = "none";
      document.getElementById('loginPage').style.display = "";
      document.getElementById('loginError').innerText = "";
    }
    function signUp() {
      let username = document.getElementById('signUpUsername').value.trim();
      let pass = document.getElementById('signUpPassword').value;
      let confirm = document.getElementById('signUpConfirm').value;
      let error = document.getElementById('signUpError');
      error.innerText = "";
      if(!username || !pass || !confirm) {
        error.innerText = "‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!";
        return;
      }
      if(pass !== confirm) {
        error.innerText = "Password match ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∞‡§π‡•á!";
        return;
      }
      let users = getUsers();
      if(users[username]) {
        error.innerText = "Username ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à!";
        return;
      }
      users[username] = {password: pass};
      setUsers(users);
      setLoggedInUser(username);
      afterLogin(username);
    }
    function login() {
      let username = document.getElementById('loginUsername').value.trim();
      let pass = document.getElementById('loginPassword').value;
      let error = document.getElementById('loginError');
      error.innerText = "";
      if(username==="admin" && pass==="admin@123") {
        setLoggedInUser(username);
        afterLogin(username);
        return;
      }
      let users = getUsers();
      if(!users[username]) {
        error.innerText = "User ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ! Sign Up ‡§ï‡§∞‡•á‡§Ç‡•§";
        return;
      }
      if(users[username].password !== pass) {
        error.innerText = "Password ‡§ó‡§≤‡§§ ‡§π‡•à!";
        return;
      }
      setLoggedInUser(username);
      afterLogin(username);
    }
    function afterLogin(username) {
      document.getElementById('loginPage').style.display = "none";
      document.getElementById('signUpPage').style.display = "none";
      document.getElementById('navBar').style.display = "flex";
      document.getElementById('usernamebar').style.display = "block";
      document.getElementById('usernameShow').innerText = username;
      showTab('home');
      if(username==="admin") document.getElementById("tab-admin").style.display = "block";
    }
    function logout() {
      localStorage.removeItem('antarjaalLoggedInUser');
      document.getElementById('navBar').style.display = "none";
      document.getElementById('usernamebar').style.display = "none";
      document.getElementById("tab-admin").style.display = "none";
      showLogin();
    }
    function showTab(tab) {
      let tabs = ["home","admin"];
      tabs.forEach(t=>{
        let el = document.getElementById(t+"Page") || document.getElementById("adminPanel");
        if(el) el.style.display = "none";
        let tb = document.getElementById("tab-"+t);
        if(tb) tb.classList.remove("active");
      });
      if(tab==="admin") {
        if(getLoggedInUser()!=="admin") return;
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("tab-admin").classList.add("active");
        renderAdminPanel();
        return;
      }
      document.getElementById(tab+"Page").style.display = "block";
      document.getElementById("tab-"+tab).classList.add("active");
    }
    function renderAdminPanel() {
      let users = getUsers();
      let tbody = document.getElementById("adminUsersTable").querySelector("tbody");
      tbody.innerHTML = "";
      let idx = 1;
      for(let k in users){
        tbody.innerHTML += `<tr><td>${idx++}</td><td>${k}</td></tr>`;
      }
    }
    function adminBroadcastMsg() {
      let val = document.getElementById("adminBroadcastInput").value.trim();
      if(val.length) localStorage.setItem("antarjaalBroadcast",val);
      showBroadcast();
      document.getElementById("adminBroadcastInput").value="";
    }
    function adminClearBroadcast() {
      localStorage.removeItem("antarjaalBroadcast");
      showBroadcast();
    }
    function showBroadcast() {
      let msg = localStorage.getItem("antarjaalBroadcast")||"";
      let bar = document.getElementById("broadcastBar");
      bar.style.display = msg?"block":"none";
      bar.innerText = msg;
    }
    window.onload = function() {
      let logged = getLoggedInUser();
      if(logged && (logged==="admin" || getUsers()[logged])) {
        afterLogin(logged);
      } else {
        showLogin();
      }
      showBroadcast();
    };
  </script>
</body>
</html>
